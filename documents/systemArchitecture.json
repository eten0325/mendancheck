{
  "key": "systemArchitecture",
  "value": {
    "id": "c78b9282-54ba-4e70-a930-6f99198b5cbf",
    "projectId": "6aa42787-0c5f-4f77-a56b-ad046553a245",
    "mermaid": "graph TD\n  subgraph フロントエンド\n    A[CSVファイルアップロードUI表示] --> B(CSVファイルアップロード)\n    B --> C{CSVファイル}\n    D[結果表示UI表示] --> E(グラフ表示)\n    D --> F(上位抽出リスト表示)\n    D --> G(評価結果表表示)\n    H[設定画面UI表示] --> I(上位抽出割合設定変更)\n    J[ファイルドラッグアンドドロップ]\n    K[ファイル選択ボタン表示]\n    L[処理完了後CSVダウンロード]\n    M[処理完了後PDFダウンロード]\n    N[直感的なUI]\n    O[インタラクティブグラフ表示]\n    P[ソート機能]\n    Q[フィルタ機能]\n    R[レスポンシブデザイン対応]\n    style A fill:#f9f,stroke:#333,stroke-width:2px\n    style D fill:#f9f,stroke:#333,stroke-width:2px\n    style H fill:#f9f,stroke:#333,stroke-width:2px\n    style J fill:#f9f,stroke:#333,stroke-width:2px\n    style K fill:#f9f,stroke:#333,stroke-width:2px\n    style L fill:#f9f,stroke:#333,stroke-width:2px\n    style M fill:#f9f,stroke:#333,stroke-width:2px\n    style N fill:#f9f,stroke:#333,stroke-width:2px\n    style O fill:#f9f,stroke:#333,stroke-width:2px\n    style P fill:#f9f,stroke:#333,stroke-width:2px\n    style Q fill:#f9f,stroke:#333,stroke-width:2px\n    style R fill:#f9f,stroke:#333,stroke-width:2px\n  end\n\n  subgraph バックエンド\n    C --> S(CSVファイル形式検証)\n    S --> T{検証結果}\n    T -- 成功 --> U(CSVファイル読み込み)\n    U --> V(データパース処理)\n    V --> W(BMIスコア算出)\n    V --> X(血圧スコア算出)\n    V --> Y(血糖値スコア算出)\n    V --> Z(脂質スコア算出)\n    V --> AA(肝機能スコア算出)\n    W --> AB(BMI評価)\n    X --> AC(血圧評価)\n    Y --> AD(血糖値評価)\n    Z --> AE(脂質評価)\n    AA --> AF(肝機能評価)\n    AB --> AG[各項目のスコア]\n    AC --> AG\n    AD --> AG\n    AE --> AG\n    AF --> AG\n    AG --> AH(総スコア算出)\n    AH --> AI(データ保存処理)\n    AI --> AJ(総スコア分布集計)\n    AJ --> AK(グラフ用データ作成)\n    AK --> E\n    AI --> AL(上位抽出)\n    AL --> F\n    AI --> AM[各IDごとの評価結果]\n    AM --> G\n    AI --> AN(再抽出処理)\n    AN --> AL\n    O --> AK\n    AP[パラメータ設定ファイル読み込み]\n    AQ[パラメータDB読み込み]\n    I --> AN\n    I --> AP\n    I --> AQ\n    V --> BA(スコアリング)\n    BA --> AG\n    A --> BE(ウイルスチェック実行)\n    A --> BF(入力値検証実行)\n    BE --> T\n    BF --> T\n    GD[ログ出力処理]\n    style S fill:#ccf,stroke:#333,stroke-width:2px\n    style U fill:#ccf,stroke:#333,stroke-width:2px\n    style V fill:#ccf,stroke:#333,stroke-width:2px\n    style W fill:#ccf,stroke:#333,stroke-width:2px\n    style X fill:#ccf,stroke:#333,stroke-width:2px\n    style Y fill:#ccf,stroke:#333,stroke-width:2px\n    style Z fill:#ccf,stroke:#333,stroke-width:2px\n    style AA fill:#ccf,stroke:#333,stroke-width:2px\n    style AB fill:#ccf,stroke:#333,stroke-width:2px\n    style AC fill:#ccf,stroke:#333,stroke-width:2px\n    style AD fill:#ccf,stroke:#333,stroke-width:2px\n    style AE fill:#ccf,stroke:#333,stroke-width:2px\n    style AF fill:#ccf,stroke:#333,stroke-width:2px\n    style AH fill:#ccf,stroke:#333,stroke-width:2px\n    style AI fill:#ccf,stroke:#333,stroke-width:2px\n    style AJ fill:#ccf,stroke:#333,stroke-width:2px\n    style AK fill:#ccf,stroke:#333,stroke-width:2px\n    style AL fill:#ccf,stroke:#333,stroke-width:2px\n    style AN fill:#ccf,stroke:#333,stroke-width:2px\n    style AP fill:#ccf,stroke:#333,stroke-width:2px\n    style AQ fill:#ccf,stroke:#333,stroke-width:2px\n    style BA fill:#ccf,stroke:#333,stroke-width:2px\n    style BE fill:#ccf,stroke:#333,stroke-width:2px\n    style BF fill:#ccf,stroke:#333,stroke-width:2px\n    style GD fill:#ccf,stroke:#333,stroke-width:2px\n    style T fill:#ccf,stroke:#333,stroke-width:2px\n  end\n\n  subgraph データベース\n    AI --> DB[データ]\n    style DB fill:#bbdefb,stroke:#333,stroke-width:2px\n  end\n\n  subgraph 外部サービス\n  end\n\n\n  subgraph アクター\n    ユーザ[健康診断結果の評価担当者]\n    管理者[システム管理者]\n    医療従事者\n    ユーザ --> A\n    ユーザ --> J\n    ユーザ --> K\n    ユーザ --> L\n    ユーザ --> M\n    管理者 --> H\n    医療従事者 --> D\n    医療従事者 --> O\n    医療従事者 --> P\n    医療従事者 --> Q\n  end",
    "phase": 1,
    "version": 1,
    "status": "published",
    "lastUpdatedBy": "044e6361-5852-435e-9e0e-990ef176ad8f",
    "createdAt": "2025-02-21T13:43:48.738Z",
    "updatedAt": "2025-02-21T13:43:48.738Z",
    "internalId": "aee37ab0-6041-4cc0-9410-120a88bd4e3c"
  }
}
